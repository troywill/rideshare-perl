* tangle file:./bin/event
  #+BEGIN_SRC perl :tangle ./bin/event :shebang #!/usr/bin/env perl
    use warnings;
    use strict;

    # connect to the database
    use DBI;
    my $dbh = DBI->connect("dbi:Pg:dbname=rideshare","","");

    if ($ARGV[0] == 1) {
        my $statement = "INSERT INTO event VALUES(DEFAULT, 1, now())";
        $dbh->do($statement);
    }
    if ($ARGV[0] == 2) {
        my $statement = "INSERT INTO event VALUES(DEFAULT, 2, now())";
        $dbh->do($statement);
    }
  #+END_SRC

* tangle file:./bin/event-read
  #+BEGIN_SRC perl :tangle ./bin/event-read :shebang #!/usr/bin/env perl
    use warnings;
    use strict;

    # connect to the database
    use DBI;
    my $dbh = DBI->connect("dbi:Pg:dbname=rideshare","","");

    my $statement = "SELECT id,event_id, timestamp FROM event";
    my $array_ref = $dbh->selectall_arrayref($statement);

    foreach my $myRow (@$array_ref) {
      print "-" x 80, "\n";
      my ( $id, $event, $timestamp ) = @$myRow;
      print "id: $id\n";
      print "event: $event\n";
      print "timestamp: $timestamp\n";
    }

    $dbh->disconnect();
  #+END_SRC
* tangle file:./bin/read-gpspoint
  #+BEGIN_SRC perl :tangle ./bin/read-gpspoint :shebang #!/usr/bin/env perl
    use warnings;
    use strict;

    # connect to the database
    use DBI;
    my $dbh = DBI->connect("dbi:Pg:dbname=rideshare","","");

    my $statement = "SELECT id, timestamp, name, lat, lon, speed, heading FROM gpspoint";
    my $array_ref = $dbh->selectall_arrayref($statement);

    foreach my $myRow (@$array_ref) {
      print "-" x 80, "\n";
      my ( $id, $timestamp, $name, $lat, $lon ) = @$myRow;
      print "timestamp: $lat,$lon\n";
    }

    $dbh->disconnect();
  #+END_SRC
  
