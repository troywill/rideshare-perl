* tangle file:./bin/event
  #+BEGIN_SRC perl :tangle ./bin/event :shebang #!/usr/bin/env perl
    use warnings;
    use strict;

    # connect to the database
    use DBI;
    my $dbh = DBI->connect("dbi:Pg:dbname=rideshare","","");

    if ($ARGV[0] == 1) {
        my $statement = "INSERT INTO event VALUES(DEFAULT, 1, now())";
        $dbh->do($statement);
    }
    if ($ARGV[0] == 2) {
        my $statement = "INSERT INTO event VALUES(DEFAULT, 2, now())";
        $dbh->do($statement);
    }
  #+END_SRC

* tangle file:./bin/event-read
  #+BEGIN_SRC perl :tangle ./bin/event-read :shebang #!/usr/bin/env perl
    use warnings;
    use strict;

    # connect to the database
    use DBI;
    my $dbh = DBI->connect("dbi:Pg:dbname=rideshare","","");

    my $statement = "SELECT id, time, event FROM event";
    my $array_ref = $dbh->selectall_arrayref($statement);

    foreach my $myRow (@$array_ref) {
      print "@$myRow\n";
    }

    $dbh->disconnect();

    __END__

    my $rs = $dbh->selectall_arrayref("SELECT '" . join("','", @fromFields
    +) . "' FROM $fromTable");


    foreach my $myRow (@$rs) {
      print "@$myRow\n";
      foreach my $myElem (@$myRow) {
        print "$myElem,";
      }
      print "\n";
    }

  #+END_SRC
